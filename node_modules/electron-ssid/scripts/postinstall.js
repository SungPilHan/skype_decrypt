// @ts-check

const { join, resolve } = require('path');
const { fetchBinariesFromPackage, getBranchName, getPlatformBranchName } = require('@skype/ivy-downloader');

const revision = '2.0.0.15';
const electronBranch = 'skype-3.0';

fetchBinariesFromPackage({
    registry: 'csc',
    org: 'skype',
    group: 'client-shared_electron',
    name: 'electron-ssid',
    branch: getBranchName({ name: 'electron-ssid', electronBranch }),
    revision,
    target: `${getPlatformBranchName()}_${electronBranch}_release`,
    archive: `electron-ssid-${revision}.tgz`,
    symbols: `electron-ssid-breakpad-${revision}.zip`,
    binaries: [join('build', 'Release', 'electron-ssid.node')]
}, resolve(__dirname, '..'));
