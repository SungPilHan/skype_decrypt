const { join, resolve } = require('path');
const { ncp } = require('ncp');

const PACKAGE_NAME = 'slimcore-electron';

// Relative to clients/node_modules/PACKAGE_NAME
const CALLING_MODULES_PATH = join('..', '..', '..', 'calling', 'modules');
const SLIMCORE_PATH = join(CALLING_MODULES_PATH, PACKAGE_NAME);

// Root of this library
const TARGET = resolve(__dirname, '..');

ncp(SLIMCORE_PATH, TARGET, err => {
    if (err) {
        console.error(`[calling-package-installer] Installation of ${PACKAGE_NAME} failed.`);
        console.error(err);
        console.error(err.message);
        console.error(err.stack);
        process.exit(1);
    }

    console.log(`Installed ${PACKAGE_NAME}.`);
});
