// @ts-check

const { join, resolve } = require('path');
const { fetchBinariesFromPackage, getBranchName, getPlatformBranchName } = require('@skype/ivy-downloader');

const revision = '0.0.1.5';
const electronBranch = 'skype-3.0';

fetchBinariesFromPackage({
    registry: 'csc',
    org: 'skype',
    group: 'client-shared_electron',
    name: 'electron-utility',
    branch: getBranchName({ name: 'electron-utility', electronBranch }),
    revision,
    target: `${getPlatformBranchName()}_${electronBranch}_release`,
    archive: `electron-utility-${revision}.tgz`,
    symbols: `electron-utility-breakpad-${revision}.zip`,
    binaries: [join('build', 'Release', 'electron_utility.node')]
}, resolve(__dirname, '..'));
